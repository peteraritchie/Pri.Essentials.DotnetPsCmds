namespace Pri.Essentials.DotnetProjects;

/// <summary>
/// Represents the result of an operation, indicating whether it was successful or not.
/// </summary>
public abstract record Result
{
	/// <summary>
	/// Indicates whether the operation was successful.
	/// </summary>
	public abstract bool IsSuccessful { get; }
}

/// <summary>
/// Represents the result of a shell command execution, including the exit code, standard output, and standard error
/// output.
/// </summary>
/// <remarks>Use this record to capture and inspect the outcome of executing a shell or command-line process. The
/// properties provide access to the process's exit code and any output or error messages generated during
/// execution.</remarks>
/// <param name="ExitCode">The exit code returned by the shell process. A value of 0 typically indicates success; nonzero values indicate an
/// error or abnormal termination.</param>
/// <param name="OutputText">The text written to the standard output stream by the shell command. May be empty if the command produced no output.</param>
/// <param name="ErrorText">The text written to the standard error stream by the shell command. May be empty if no errors were reported.</param>
public record ShellOperationResult(int ExitCode, string OutputText, string ErrorText) : Result
{
	/// <summary>
	/// Gets the exit code returned by the process after it has terminated.
	/// </summary>
    public int ExitCode { get; private set; } = ExitCode;

	/// <summary>
	/// Gets the output text generated by the operation.
	/// </summary>
    public string OutputText { get; private set; } = OutputText;

	/// <summary>
	/// Gets the error message associated with the current operation or state.
	/// </summary>
    public string ErrorText { get; private set; } = ErrorText;

	/// <summary>
	/// Gets a value indicating whether the operation completed successfully.
	/// </summary>
	public override bool IsSuccessful => ExitCode == 0;

	/// <summary>
	/// Gets the command-line that was executed.
	/// </summary>
	public string OperationText { get; init; } = string.Empty;

	/// <summary>
	/// <code>true</code> if the ExitCode is not 0, <code>false</code>
	/// otherwise.
	/// </summary>
	[System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverage]
	public bool IsFailure => ExitCode != 0;
}
